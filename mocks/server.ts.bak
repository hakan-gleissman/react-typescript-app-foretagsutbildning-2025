import { setupServer } from "msw/node";
import { http, HttpResponse } from "msw";

export const server = setupServer(
  http.get("http://localhost:8080/movies", async ({ request }) => {
    const token = request.headers.get("Authorization");

    if (!token || token !== "Bearer mock-token") {
      return HttpResponse.json({ message: "Unauthorized" }, { status: 401 });
    }

    return HttpResponse.json(
      //   [
      //     {
      //       title: "Inception",
      //       description: "A mind-bending thriller",
      //       productionYear: 2010,
      //       director: "Christopher Nolan",
      //     },
      //     {
      //       title: "The Matrix",
      //       description: "A sci-fi classic",
      //       productionYear: 1999,
      //       director: "Lana Wachowski, Lilly Wachowski",
      //     },
      //   ],
      [],
      { status: 200 }
    );
  })
);
